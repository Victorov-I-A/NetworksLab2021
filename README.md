# Лабораторная работа №1

## Протокол 

### Формат сообщений

Кажое сообщения начинается с десяти байт, в которых содержится длина всего остального сообщения. 
Затем идёт байт, который сообщает о типе предаваемого сообщения: 
* 0 - сообщение об ошибке
* 1 - запрос подключения с именем;
* 2 - одобрение запроса подключения с именем;
* 3 - отправка сообщения клиентом;
* 4 - рассылка сообщения сервером;
* 5 - отправка сообщения с файлом клиентом;
* 6 - рассылка сообщения с файлом сервером;
* 7 - запрос на отключение клиента;
* 8 - одобрение отключения клиента;
* 9 - запрос на закрытие сервера.

От типа сообщения зависит количество его разделов. Например, в сообщении с индексом 1 два раздела: сообственно байт с типом сообщения и желаемое имя пользователя.
У сообщения с индексом 6 шесть разделов: тип, время принятия сервером, имя пользователя, сообщение, название файла, байткод файла. При этом разделы отделены 
друг от друга управляющим символом ';'. Для экранирования символов используется '#'. 

### Порядок взаимодействия

В случае удачного соединения клиентского сокета к серверному, сервер создаст отдельный поток, который будет обрабатывать запросы клиента и посылать ему ответы. На клиентской стороне 
пользователь может ввести желаемое имя в чате, после чего клиент отправит его на сервере для одобрения. В случае отказа пользователю будет предложено взять 
другое имя. В случае одобрения клиент создаст дополнительный поток для обработки ввода пользователя, а в основном потоке начнёт обрабатывать сообщения от сервера.
Пользователь может посыть простые сообщения или сообщения с файлом, для чего после сообщения нужно написать неэкранированный символ ';' и имя файла. Для отключения 
от чата пользователь может ввести сообщение "#quit", а для закрытия сервера "#close".
